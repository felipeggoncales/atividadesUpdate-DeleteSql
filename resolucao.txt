/* Atividades Update */

/* 1 - Atualizar peso do paciente 1 para 8.5 kg */
UPDATE PACIENTE p SET p.peso = 8.5
WHERE p.id_paciente = 1

SELECT * FROM PACIENTE

/* 2 - Atualizar estoque do medicamento 3 */
UPDATE MEDICAMENTOS m SET m.ESTOQUE = 50
WHERE m.ID_MEDICAMENTO = 3

SELECT * FROM MEDICAMENTOS m 

/* 3 - Atualizar data de nascimento do tutor 2 */
UPDATE TUTOR t SET t.DATA_NASCIMENTO = '2001-05-15'
WHERE t.ID_TUTOR = 2

SELECT * FROM TUTOR t 

/* 4 - Atualizar motivo da consulta do paciente 5 */
UPDATE AGENDAMENTO a SET a.MOTIVO = 'Dor de barriga severa'
WHERE a.ID_AGENDAMENTO = 5

SELECT * FROM AGENDAMENTO a 

/* 5 - Atualizar descrição do medicamento 6 */
UPDATE MEDICAMENTOS m SET m.DESCRICAO = 'Anti-inflamatório para articulações'
WHERE m.ID_MEDICAMENTO = 6

SELECT * FROM MEDICAMENTOS m 

/* 6 - Atualizar nome do tutor */
UPDATE TUTOR t SET t.NOME = 'Maria Oliveira'
WHERE t.ID_TUTOR = 3

SELECT * FROM TUTOR

/* 7 - Atualizar a descrição do medicamento 2 */
UPDATE MEDICAMENTOS m SET m.DESCRICAO = 'Aplicar no olho afetado a cada 4 horas'
WHERE m.ID_MEDICAMENTO = 2

SELECT * FROM MEDICAMENTOS m 

/* 8 - Atualizar endereço do tutor */
UPDATE TUTOR t SET t.ENDERECO = 'Rua dos Girassóis, 123'
WHERE t.ID_TUTOR = 4

SELECT * FROM TUTOR

/* 9 -Deletar consulta com ID 7 */
DELETE FROM AGENDAMENTO a
WHERE a.ID_AGENDAMENTO = 7

SELECT * FROM AGENDAMENTO a 

/* 10 -Deletar medicamento com ID 8 */
DELETE FROM MEDICAMENTOS m
WHERE m.ID_MEDICAMENTO = 8

SELECT * FROM MEDICAMENTOS m 

/* 11 - Deletar animais com ID tutor 5 */
DELETE FROM RECEITA r
WHERE r.ID_AGENDAMENTO IN (
	SELECT a.ID_AGENDAMENTO
	FROM AGENDAMENTO a 
	WHERE a.ID_PACIENTE IN (
		SELECT p.ID_PACIENTE
		FROM PACIENTE p
		WHERE p.ID_TUTOR = 5
	)
)

DELETE FROM AGENDAMENTO a
WHERE a.ID_PACIENTE IN (
	SELECT p.ID_PACIENTE
	FROM PACIENTE p
	WHERE p.ID_TUTOR = 5
)

DELETE FROM PACIENTE p
WHERE p.ID_TUTOR = 5

SELECT * FROM PACIENTE p 

/* 12 - Deletar todos as receitas e itens que não estão atrelados a nenhum agendamento */

DELETE FROM RECEITA r
WHERE r.ID_AGENDAMENTO NOT IN (
	SELECT a.ID_AGENDAMENTO
	FROM AGENDAMENTO a
)

DELETE FROM ITENSRECEITA i
WHERE i.ID_RECEITA IN (
	SELECT r.ID_RECEITA
	FROM RECEITA r
	WHERE r.ID_AGENDAMENTO NOT IN (
		SELECT a.ID_AGENDAMENTO
		FROM AGENDAMENTO a
	)
)
/* Nenhum dado foi apagado */

/* 13 - Deletar tutores que nasceram antes de 1987 */
DELETE FROM TUTOR t
WHERE t.DATA_NASCIMENTO < '1987-12-31'
/* Nenhum dado foi apagado */

/* 14 - Deletar itens da tabela receita no intervalo de 7 a 9*/
DELETE FROM RECEITA r
WHERE r.ID_RECEITA BETWEEN 7 AND 9

SELECT * FROM RECEITA r 
